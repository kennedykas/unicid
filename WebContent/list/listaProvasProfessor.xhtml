<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
      
	<!-- HEAD -->
	<ui:include src="../componentes/head/head.xhtml"/>
<h:body class="grey lighten-4">

	<!-- NAVBAR -->
	<ui:include src="../componentes/header/navbarProfessor.xhtml"/>
	
	<div class="container">
	
		<!-- LISTA VAZIA -->
  		<h:panelGroup rendered="#{controllerProvas.getListaProvas().getRowCount() eq 0 ? true : false}">
 			
 			<h:outputText
 				class="grey-text" 
 				value="#{msg['nothing.found']}" 
 				style="font-size:1.5em"/>
  		</h:panelGroup>		
			
		<h:panelGroup rendered="#{controllerProvas.getListaProvas().getRowCount() eq 0 ? false : true}">
			<h:dataTable value="#{controllerProvas.getListaProvas()}" var="dados" class="table table-striped">
				<div class="center z-depth-2 white" style="margin:11vh 0;padding:20px 30px 30px 30px;">
					<h:form styleClass="loading">		
				
						<!-- TITULO -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.title']}"/>
							</f:facet>
							<h:outputText value="#{dados.titulo}"/>
						</h:column>
			
						<!-- DISCIPLINA -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.discipline']}"/>
							</f:facet>
							<h:outputText value="#{controllerDisciplinas.nomeDisciplina(dados.codDisciplina)}"/>
						</h:column>
			
						<!-- NUMERO DE QUESTOES -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.number.of.questions']}"/>
							</f:facet>
							<h:outputText value="#{controllerProvas.numberQuestions(dados.questoes)}"/>
						</h:column>
			
						<!-- VALOR TOTAL -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.total.value']}"/>
							</f:facet>
							<h:outputText value="#{dados.valorTotal}"/>
						</h:column>
		
						<!-- VALOR INDIVIDUAL -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.questions.value']}"/>
							</f:facet>
							<h:outputText value="#{dados.valorQuestoes}"/>
						</h:column>
		
						<!-- TEMPO -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.test.time']}"/>
							</f:facet>
							<h:outputText value="#{dados.tempo} min."/>
						</h:column>
			
						<!-- HORARIO -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.realization.date']}"/>
							</f:facet>
							<h:outputText value="#{dados.data eq ''? '???' : dados.data}"/>
						</h:column>
						
						<!-- REALIZAR APOS DATA -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.allow.after.date']}"/>
							</f:facet>
							<h:outputText value="#{dados.permitir eq false ? msg['upper.not'] : msg['upper.yes']}"/>
						</h:column>
						
						<!-- MULTIPLAS TENTATIVAS -->
						<h:column>
							<f:facet name="header">
								<h:outputText value="#{msg['upper.multiple.attempts']}"/>
							</f:facet>
							<h:outputText value="#{dados.allowMultipleAttempts eq false ? msg['upper.not'] : msg['upper.yes']}"/>
						</h:column>
						
						<!-- ACOES -->
						<h:column>
							<!-- VISUALIZAR -->
							<span class="tooltipped" data-position="left" 
								data-delay="50" data-tooltip="#{msg['upper.see']}">
								<h:commandLink 
									actionListener="#{controllerProvas.selecionarRegistro}" 
									action="/see/gabaritoProfessor">
									<i class="material-icons right">format_list_numbered</i>
								</h:commandLink>
							</span>							
					
							<!-- ALTERAR INFORMACOES -->
					  		<p:commandLink 
					  			styleClass="glyphicon glyphicon-edit" 
					  			data-toggle="modal" 
					  			data-target="#myModal" 
					  			title="Alterar informações" 
					  			onclick="$('#myModal').modal('show');">
					  			asdfsad
					  			<f:ajax listener="#{controllerProvas.selecionarRegistro}"/>
					  		</p:commandLink>
								
							<!-- EDITAR -->
							<span class="tooltipped" data-position="left" 
								data-delay="50" data-tooltip="#{msg['upper.edit']}">
								<h:commandLink 
									action="/update/alterarDisciplina">
									
									<f:actionListener binding="#{controllerDisciplinas.selecionarRegistro()}"/>
		    						<f:actionListener binding="#{controllerDisciplinaCurso.obterCursosDisciplinaPertence(dados.codigo)}"/>
									
									<i class="material-icons right">mode_edit</i>
								</h:commandLink>
							</span>

							<!-- EXCLUIR -->
							<span class="tooltipped" data-position="left" 
								data-delay="50" data-tooltip="#{msg['upper.delete']}">
								
								<h:commandLink 
									actionListener="#{controllerProvas.selecionarRegistro}" 
									action="#{controllerProvas.excluir}" 
									onclick="return confirm('Tem certeza que deseja remover está prova? Ela não podera ser recuperada depois!')">
  									<i class="material-icons right">delete</i>
  								</h:commandLink>
							</span>
						</h:column>
					</h:form>
				</div>
			</h:dataTable>
		</h:panelGroup>
		
		<!-- MODAL INFO PROVA -->
		<div class="modal fade" id="myModal" role="dialog">
			<div class="modal-dialog modal-sm">
		    	<div class="modal-content">
		    		<h:form id="formInfoProva">
		    			
		    			<!-- MODAL HEADER -->
				        <div class="modal-header">
				        	<button type="button" class="close" data-dismiss="modal">&times;</button>
				         	<h4 class="modal-title">Alterar informações da prova.</h4>
				         	<h6>
				         		<span class="glyphicon glyphicon-info-sign"/>
				         		O aluno poderá começar a avaliação até 10 minutos antes, mas nem um minuto depois!				  
				         	</h6>
				        </div>
				        
				        <!-- FORM INFORMACOES PROVA -->
						<ui:include src="../componentes/form/professor/formInformacoesProva.xhtml"/>
				        
				        <!-- MODAL FOOTER -->
				        <div class="modal-footer">
				        	<!-- SUBMIT -->
				        	<h:commandButton 
				        		action="#{controllerProvas.alterarInformacoes}" 
				        		class="form-control btn btn-default" 
				        		data-dismiss="modal" 
				        		value="Alterar informações"/>
				        </div>
		    		</h:form>
				</div>
			</div>
		</div>

	</div>
			<h:link outcome="/list/listaQuestoes" class="link">
				Selecione as questoes para criar uma nova prova
			</h:link>
		
	<!-- FOOTER -->
	<ui:include src="../componentes/footer/footer.xhtml"/>
</h:body>
</html>